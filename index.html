<script type="module">
    // ... (Tu config de Firebase y Auth) ...

    const urlAppsScript = "https://script.google.com/macros/s/AKfycbygmAVI-Ma2YIqTkft0lItFlPnyhoVWPJFACR7qXo-NAr5MQ4JMH29BwTMOPmII05ovqg/exec";

    document.getElementById('product-form').addEventListener('submit', async (e) => {
        e.preventDefault();
        const btn = document.getElementById('btn-save');
        btn.innerText = "ENVIANDO...";
        btn.disabled = true;

        const registro = {
            categoria_pestana: document.getElementById('categoria').value,
            anio: document.getElementById('anio').value,
            semestre: document.getElementById('semestre').value,
            fecha_solicitud: document.getElementById('fecha_solicitud').value, // NUEVO
            titulo: document.getElementById('titulo').value,
            autor: document.getElementById('autor').value,
            documento: document.getElementById('documento').value,
            pais: document.getElementById('pais').value, // NUEVO (Viene del archivo 2024)
            dedicacion: document.getElementById('dedicacion').value,
            facultad: document.getElementById('facultad').value,
            programa: document.getElementById('programa').value,
            modalidad: document.getElementById('modalidad')?.value || 'N/A',
            extra_id: document.getElementById('extra_id')?.value || 'N/A',
            extra_nombre: document.getElementById('extra_nombre')?.value || 'N/A'
        };

        try {
            // Guardar en Firebase y Drive
            await fetch(urlAppsScript, { method: 'POST', mode: 'no-cors', body: JSON.stringify(registro) });
            alert("✅ Registro exitoso con fecha: " + registro.fecha_solicitud);
            e.target.reset();
        } catch (err) { alert("❌ Error"); }
        finally { btn.innerText = "GUARDAR REGISTRO"; btn.disabled = false; }
    });
</script>

<div class="grid grid-cols-1 md:grid-cols-2 gap-4 bg-slate-50 p-4 rounded-xl mb-6">
    <div>
        <label class="block text-[10px] font-black text-gray-500 uppercase mb-1">Fecha de Presentación de la Solicitud</label>
        <input type="date" id="fecha_solicitud" required class="w-full p-2 border-2 rounded-lg outline-none focus:border-green-600 font-bold">
    </div>
    <div>
        <label class="block text-[10px] font-black text-gray-500 uppercase mb-1">País del Producto</label>
        <input type="text" id="pais" placeholder="Ej: Colombia" class="w-full p-2 border-2 rounded-lg outline-none focus:border-green-600 font-bold">
    </div>
</div>
